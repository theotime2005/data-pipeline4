# sample.env — fichier d'exemple pour le POC
# - Contient les variables d'environnement utilisées par les services (db, mlflow, train, api)
# - Ne pas mettre de secrets réels ici. Pour la prod, stocker les secrets dans un gestionnaire de secrets.
# - Pour une version plus mature, séparer les fichiers d'env par service (ex: services/api/.env)

# -----------------------------
# PostgreSQL (utilisé par db, preprocess, train, mlflow)
# -----------------------------
POSTGRES_DB=irisdb
POSTGRES_USER=iris
POSTGRES_PASSWORD=irispass   # <--- remplacer par un mot de passe sécurisé
POSTGRES_HOST=db
POSTGRES_PORT=5432

# Optional: URL de connexion complète (utile pour certains outils)
# DATABASE_URL=postgresql+psycopg2://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$POSTGRES_DB

# -----------------------------
# MLflow (server / clients)
# -----------------------------
MLFLOW_TRACKING_URI=http://mlflow:5000
MLFLOW_EXPERIMENT_NAME=iris-sepal-regression
MLFLOW_ARTIFACT_ROOT=file:///mlruns

# Variables spécifiques si vous démarrez le serveur MLflow (ex: override)
# MLFLOW_SERVER_HOST=0.0.0.0
# MLFLOW_SERVER_PORT=5000
# BACKEND_STORE_URI=postgresql+psycopg2://$POSTGRES_USER:$POSTGRES_PASSWORD@$POSTGRES_HOST:$POSTGRES_PORT/$POSTGRES_DB

# -----------------------------
# API (FastAPI) / service
# -----------------------------
MODEL_NAME=iris_sepal_length_regressor
API_HOST=0.0.0.0
API_PORT=8000
API_MODEL_LOAD_RETRIES=30   # nombre de tentatives pour que l'API attende le modèle dans MLflow
API_MODEL_LOAD_DELAY=3      # délai (s) entre les tentatives
LOG_LEVEL=INFO

# -----------------------------
# Sécurité / Features optionnelles
# -----------------------------
# SECRET_KEY=changeme          # pour auth future (ne pas committer de vraies clés)
# SENTRY_DSN=                   # si vous intégrez un monitoring

# -----------------------------
# Notes
# -----------------------------
# - Ce fichier est un exemple pour le POC. Dans une architecture séparée, chaque service
#   devrait avoir son propre fichier d'env qui contient uniquement ce dont il a besoin.
# - Le fichier réel `.env` est listé dans `.gitignore` pour éviter de committer des secrets.
# - Pour déployer en prod, utiliser des secrets Docker / variables d'environnement CI/CD / Vault.
